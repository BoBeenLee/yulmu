/**
 * jQuery PakTaeJin mfloatlayer V2.0.0
*/

(function(t,d,b){t.uaMatch=function(b){b=b.toLowerCase();var d=/(edge)\/([\w.]+)/.exec(b)||/(opr)[\/]([\w.]+)/.exec(b)||/(whale)[ \/]([\w.]+)/.exec(b)||/(vivaldi)[ \/]([\w.]+)/.exec(b)||/(chrome)[ \/]([\w.]+)/.exec(b)||/(iemobile)[\/]([\w.]+)/.exec(b)||/(safari)[ \/]([\w.]+)/.exec(b)||/(webkit)[ \/]([\w.]+)/.exec(b)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(b)||/(msie) ([\w.]+)/.exec(b)||0<=b.indexOf("trident")&&/(rv)(?::| )([\w.]+)/.exec(b)||0>b.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(b)||[];b=/(ipad)/.exec(b)||/(ipod)/.exec(b)||/(windows phone)/.exec(b)||/(iphone)/.exec(b)||/(kindle)/.exec(b)||/(silk)/.exec(b)||/(android)/.exec(b)||/(win)/.exec(b)||/(mac)/.exec(b)||/(linux)/.exec(b)||/(cros)/.exec(b)||/(playbook)/.exec(b)||/(bb)/.exec(b)||/(blackberry)/.exec(b)||[];return{browser:d[1]||"",version:d[2]||"0",platform:b[0]||""}};d=t.uaMatch(d.navigator.userAgent);b={};d.browser&&(b[d.browser]=!0,b.version=d.version);d.platform&&(b[d.platform]=!0);if(b.android||b.bb||b.blackberry||b.ipad||b.iphone||b.ipod||b.kindle||b.playbook||b.silk||b["windows phone"])b.mobile=!0;if(b.cros||b.mac||b.linux||b.win)b.desktop=!0;if(b.chrome||b.opr||b.safari||b.vivaldi||b.whale)b.webkit=!0;if(b.rv||b.iemobile)d.browser="msie",b.msie=!0;b.safari&&b.blackberry&&(d.browser="blackberry",b.blackberry=!0);b.safari&&b.playbook&&(d.browser="playbook",b.playbook=!0);b.safari&&b.android&&(d.browser="android",b.android=!0);b.safari&&b.kindle&&(d.browser="kindle",b.kindle=!0);b.safari&&b.silk&&(d.browser="silk",b.silk=!0);t.browser=b})(jQuery,window);$(function(){var t="";$.fn.extend({reSizeL:function(d,b){$(this).trigger("mfloatlayerchg",[d,b])},reLoadL:function(d,b,t){$(d).trigger("blur",[d,b,t]);return!1}});$.fn.dg_mfloatlayer=function(d){function b(b,D){void 0!=b&&void 0!=D&&(a.floatlayer=b,a.floatcontent=D);var f,c;"horizon"==a.mode?(g=$(a.floatcontent).width(),f={width:"auto",overflow:"hidden"},c="width:"+g):(g=$(a.floatcontent).height(),0<parseInt($(a.floatlayer).css("max-height"))&&(g=$(a.floatlayer).height(),$(a.floatcontent).parent().children().each(function(){$(this).attr("class")!=$(a.floatcontent).attr("class")&&(g-=$(this).outerHeight(!0))})),f={height:"auto",overflow:"hidden"},c="height:"+g);$(a.floatcontent).css(f).wrap('<div class="dg_wrap" style="position:relative; '+c+'px; overflow:hidden;"></div>');e=a.floatlayer+" > .dg_wrap";0==$(a.floatlayer+" > .dg_wrap").length&&(e=a.floatlayer+" .dg_wrap");"horizon"==a.mode&&(e=a.floatcontent);if(0==a.actpc&&0==r)return"horizon"==a.mode?$(e).css({overflowX:"auto"}):$(e).css({overflowY:"auto"}),1==a.visible?$(a.floatlayer).addClass("visible").css({display:"block",visibility:""}):$(a.floatlayer).css({display:"none",visibility:""}),!1;l=$(e+" > :last").height();m=Math.floor(g*g/l);"horizon"==a.mode&&(l=$(e+" > :last").width(),m=Math.floor(g*g/l));1==a.visible?$(a.floatlayer).addClass("visible").css({display:"block",visibility:""}):($(a.floatlayer).css({display:"none",visibility:""}),1==a.fade&&$(a.floatlayer).css({opacity:0,display:"none"}));m<g&&(f="width:7px; top:2px; bottom:2px; right:1px;",c={height:m},"horizon"==a.mode&&(f="height:7px; left:2px; right:2px; bottom:1px;",c={width:m,height:"100%"}),$(e).prepend('<div class="dgwrap_scroll" style="position:absolute; '+f+' border-radius:3px; pointer-events:none; overflow:hidden; opacity:0; z-index:100;"><div class="scroll_wheel" style="position:absolute; width:100%; height:0px; border:1px solid rgba(255, 255, 255, 0.9); border-radius:3px; background-color: rgba(0, 0, 0, 0.5); box-sizing:border-box; pointer-events:none;"></div></div>'),$(e+" > .dgwrap_scroll").css({transition:"opacity 0ms 0ms"}).find(".scroll_wheel").css({backgroundClip:"padding-box",transitionDuration:"0ms"}).css(c),$(e+" > :last").attr("dg-wheeldata",0).css({transform:"translate(0px, 0px)",transition:"0ms ease-out"}));return!1}function B(b){E=new Date;x=h;if("block"==$(a.floatlayer).css("display")&&0<v&&m<g){var f=b;1==r&&(f=b.changedTouches[0]);y=f.clientY;"horizon"==a.mode&&(y=f.clientX,F=f.clientY);if(0==$(b.target).hasClass("dg_not_layer")&&0==$(b.target).parents(".dg_not_layer").hasClass("dg_not_layer")||0==$(a.floatlayer).find(".dg_not_layer").length)$(e+" > :last").css({transitionDuration:"0ms"}),$(e+" > .dgwrap_scroll").stop().animate({opacity:1},a.scrollinganimate).find(".scroll_wheel").css({transitionDuration:"0ms"})}}function C(b){if("block"==$(a.floatlayer).css("display")&&0<v&&m<g&&(0!=a.actpc||0!=r)){var f=b;1==r&&(f=b.changedTouches[0]);z=parseInt($(e+" > :last").attr("dg-wheeldata"));0==r&&1==a.actpc?(h=f.clientY,"horizon"==a.mode&&(h=f.clientX)):(h=b.wheelDelta,1==$.browser.mozilla&&(h=b.detail));c=z+h;k=g/l*c+4;0==r&&(0<c?k=c=0:c<-(n-p)&&(c=-(n-p),k=g/l*c+4));"touchmove"==b.type||0==r&&1==a.actpc?(h=y-f.clientY,"horizon"==a.mode&&(h=y-f.clientX),c=z-h,k=g/l*c+4):$(e+" > :last").attr("dg-wheeldata",c);if(0==$(b.target).hasClass("dg_not_layer")&&0==$(b.target).parents(".dg_not_layer").hasClass("dg_not_layer")||0==$(a.floatlayer).find(".dg_not_layer").length){if(0!=r||1!=a.actpc)"horizon"==a.mode&&50>360*Math.atan(Math.abs(h)/Math.abs(F-f.clientY))/(2*Math.PI)?(c=$(e+" > :last").attr("dg-wheeldata"),k=g/l*c+4):b.preventDefault();b="0px, "+c+"px";f="0px, "+-k+"px";"horizon"==a.mode&&(b=c+"px, 0px",f=-k+"px, 0px");x!=h&&$(e+" > :last").css({transform:"translate("+b+")"});$(e+" > .dgwrap_scroll .scroll_wheel").css({transform:"translate("+f+")"})}}}function G(b){H=new Date;v=$(a.floatlayer).height();n=$(e+" > :last").height();p=$(e).height();"horizon"==a.mode&&(v=$(a.floatlayer).width(),n=$(e+" > :last").width(),p=$(e).width());200>H-E&&x!=h&&(0<h?c+=.1*-(n-p):0>h&&(c-=.1*-(n-p)),k=g/l*c+4);if("block"==$(a.floatlayer).css("display")&&0<v&&m<g&&(0<c?k=c=0:c<-(n-p)&&(c=-(n-p),k=g/l*c+4),0==$(b.target).hasClass("dg_not_layer")&&0==$(b.target).parents(".dg_not_layer").hasClass("dg_not_layer")||0==$(a.floatlayer).find(".dg_not_layer").length)){b="0px, "+c+"px";var f="0px, "+-k+"px";"horizon"==a.mode&&(b=c+"px, 0px",f=-k+"px, 0px");x!=h&&$(e+" > :last").attr("dg-wheeldata",c).css({transform:"translate("+b+")",transitionDuration:a.scrollinganimate+"ms"});$(e+" > .dgwrap_scroll").stop().animate({opacity:0},2*a.scrollinganimate).find(".scroll_wheel").css({transform:"translate("+f+")",transitionDuration:a.scrollinganimate/2+"ms"})}}function A(a,b,e){window.addEventListener?document.addEventListener(a,function(a){var f=document.querySelectorAll(b);if(f){for(var c=a.target,d=-1;c&&-1===(d=Array.prototype.indexOf.call(f,c));)c=c.parentElement;-1<d&&e.call(c,a)}},{passive:!1}):window.attachEvent&&document.attachEvent(a,function(a){var f=document.querySelectorAll(b);if(f){for(var c=a.target,d=-1;c&&-1===(d=Array.prototype.indexOf.call(f,c));)c=c.parentElement;-1<d&&e.call(c,a)}},{passive:!1})}var a={floatlayer:"",floatcontent:"",mode:"vertical",visible:!1,bg_scroll:!1,btn:null,close_btn:null,fadeanimatetime:300,actpc:!0,fade:!1,fadetime:300,delay:0,scrollinganimate:300,before:function(){},intime:function(){},after:function(){}};d&&$.extend(a,d);var r=!1;$.browser.version.split(".");1==$.browser.mobile&&(r=!0);0<$(a.floatlayer).length&&$(a.floatlayer).data("DG_LDATA",{ori_Lhtml:$(a.floatcontent).html()});var e="",g=0,l=0,m=0,k=0,y=0,h=0,c=0,z=0;$(document).on("blur",a.floatlayer,function(f,c,e,d){void 0!=$(c).data("DG_LDATA")&&(t=$(c).data("DG_LDATA").ori_Lhtml,""!=d&&void 0!=d?t=d:""==d&&(t=""),$(a.floatlayer).css({display:"block",visibility:"hidden"}),$(e).empty().html(t).attr({"dg-wheeldata":0}).css({transform:"translate(0px, 0px)"}).unwrap().css("cssText","").prev(".dgwrap_scroll").remove(),u=$(c).find("img").length,q=0,0==$(c).find("img").length?b(c,e):$(c).find("img").each(function(a){if(this.complete||0<$(this).height())q++,u==q&&b(c,e);else $(this).on("load",function(){q++;u==q&&b(c,e)}).on("error",function(){q++;u==q&&b(c,e)})}));return!1});$(a.floatlayer).css({display:"block",visibility:"hidden"});var u=$(a.floatlayer).find("img").length,q=0;0==$(a.floatlayer).find("img").length?b():$(a.floatlayer).find("img").each(function(a){if(this.complete||0<$(this).height())q++,u==q&&b(void 0,void 0);else $(this).on("load",function(){q++;u==q&&b(void 0,void 0)}).on("error",function(){q++;u==q&&b(void 0,void 0)})});if(null!=a.btn)$(document).on("click",a.btn,function(){if(0==$(a.floatlayer).hasClass("selected")){a.before();0==a.actpc&&0==r&&$("body").css({overflow:"hidden"});$(a.floatlayer).addClass("selected").css({position:"fixed",display:"block",zIndex:10002}).after('<div class="layer_bg" style="position:absolute; display:block; width:'+$("body").width()+"px; height:"+$("body").height()+'px; top:0px; left:0px; background-color:#000; opacity:0; z-index: 10001;"></div>');if(1!=$.browser.msie)$(a.floatlayer).css({top:"50.1%",left:"50%",transform:"translate(-50%, -50.1%)"});else{var b=($(window).height()-$(a.floatlayer).outerHeight())/2,c=($("body").width()-$(a.floatlayer).outerWidth())/2;$(a.floatlayer).css({top:b,left:c})}1==a.fade?(a.intime(),$(a.floatlayer).stop().delay(a.delay).animate({opacity:1},a.fadetime,function(){a.after()}).next(".layer_bg").stop().delay(a.delay).animate({opacity:.7},a.fadetime)):($(a.floatlayer).css({visibility:""}).next(".layer_bg").css({opacity:.7}),a.after())}return!1});if(null!=a.close_btn)$(document).on("click",a.close_btn,function(b){1==$(a.floatlayer).hasClass("selected")&&(a.before(),0==a.actpc&&0==r&&$("body").css({overflow:""}),1==a.fade?(a.intime(),$(a.floatlayer).next(".layer_bg").stop().animate({opacity:0},a.fadetime,function(){$(this).remove()}),$(a.floatlayer).removeClass("selected").stop().animate({opacity:0},a.fadetime,function(){$(this).css({display:"none"});a.after()})):($(a.floatlayer).removeClass("selected").css({display:"none"}),$(".layer_bg").remove(),a.after()));return!1});var v=$(a.floatlayer).height(),n=$(e+" > :last").height(),p=$(e).height();"horizon"==a.mode&&(v=$(a.floatlayer).width(),n=$(e+" > :last").width(),p=$(e).width());0==r&&1==a.actpc?(-1<a.floatcontent.indexOf(":eq")?(d=parseInt(a.floatcontent.split(":eq(")[1].replace(/[^0-9]/g,"")),$("body").prepend("<style>"+a.floatcontent.split(":eq(")[0]+":nth-child("+(d+1)+")"+a.floatcontent.split(")")[1]+" { top:0px !important; left:0px !important; }</style>")):$("body").prepend("<style>"+a.floatcontent+" { top:0px !important; left:0px !important; }</style>"),$(e+" > .dgwrap_scroll").css({opacity:0,transform:"translate(0px, "+-k+"px)",transitionDuration:a.scrollinganimate}),d="y","horizon"==a.mode&&(d="x"),$(a.floatcontent).draggable({axis:d,start:function(a){B(a)},drag:function(a){C(a)},stop:function(a){G(a)}})):(A("touchstart",a.floatlayer,function(a){B(a)}),A("touchmove",a.floatlayer,function(a){C(a)}),A("touchend",a.floatlayer,function(a){G(a)}));var E=0,H=0,F=0,x=0;$(document).on("touchmove","body",function(b){0==a.bg_scroll&&("block"==$(a.floatlayer).css("display")&&0<$(a.floatlayer).height()||1==$(b.target).hasClass("dg_not_layer")||1==$(b.target).parents().hasClass("dg_not_layer"))&&b.preventDefault()});var w="";$(window).on("orientationchange resize mfloatlayerchg",function(b,d,h){void 0!=d&&""==w&&(w=d);"Infinity"==b.target.Infinity&&(w="Window");if(a.floatlayer==w||"Window"==w)if(w="",1==$(e).parent().hasClass("selected")||1==a.visible)"horizon"==a.mode?(g=$(e).width(),l=$(e+" > :last").width(),m=Math.floor(g*g/l),b={width:m,height:"100%"},n=$(e+" > :last").width(),p=$(e).width()):(g=$(e).height(),l=$(e+" > :last").height(),m=Math.floor(g*g/l),b={height:m},n=$(e+" > :last").height(),p=$(e).height()),m<g&&c<-(n-p)&&(c=-(n-p),k=g/l*c+4),d="0px, "+c+"px",h="0px, "+-k+"px","horizon"==a.mode&&(d=c+"px, 0px",h=-k+"px, 0px"),$(e+" > :last").attr("dg-wheeldata",c).css({transform:"translate("+d+")",transitionDuration:"0ms"}),$(e+" > .dgwrap_scroll .scroll_wheel").css(b).css({transform:"translate("+h+")",transitionDuration:"0ms"}),1==$.browser.msie&&0==a.visible&&(b=($(window).height()-$(a.floatlayer).outerHeight())/2,d=($("body").width()-$(a.floatlayer).outerWidth())/2,$(a.floatlayer).css({top:b,left:d})),$(".layer_bg").css({width:$("body").width(),height:$("body").height()})})}});
